<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHPH Analytics Testing</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            line-height: 1.6;
        }
        .test-section {
            margin: 2rem 0;
            padding: 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #f9fafb;
        }
        .test-button {
            padding: 0.5rem 1rem;
            margin: 0.5rem;
            border: none;
            border-radius: 4px;
            background: #f4d03e;
            color: black;
            cursor: pointer;
            font-weight: 500;
        }
        .test-button:hover {
            background: #f4d03e90;
        }
        .log-area {
            background: #1f2937;
            color: #f9fafb;
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.875rem;
            max-height: 300px;
            overflow-y: auto;
            margin: 1rem 0;
        }
        .status {
            padding: 0.5rem;
            border-radius: 4px;
            margin: 0.5rem 0;
            font-weight: 500;
        }
        .status.success { background: #d1fae5; color: #065f46; }
        .status.warning { background: #fef3c7; color: #92400e; }
        .status.error { background: #fee2e2; color: #991b1b; }
    </style>
</head>
<body>
    <h1>üß™ WHPH Analytics Testing</h1>
    <p>This page helps test the analytics implementation for the WHPH landing page.</p>
    
    <div class="test-section">
        <h2>üìä Analytics Status</h2>
        <div id="analytics-status" class="status">Checking...</div>
        <div id="umami-status" class="status">Checking Umami...</div>
    </div>

    <div class="test-section">
        <h2>üéØ Event Testing</h2>
        <p>Click these buttons to test different analytics events:</p>
        
        <button class="test-button" onclick="testDownloadEvent('android')">
            Test Android Download
        </button>
        <button class="test-button" onclick="testDownloadEvent('windows')">
            Test Windows Download
        </button>
        <button class="test-button" onclick="testDownloadEvent('linux')">
            Test Linux Download
        </button>
        
        <br>
        
        <button class="test-button" onclick="testNavigationEvent('features')">
            Test Navigation Event
        </button>
        <button class="test-button" onclick="testThemeToggle()">
            Test Theme Toggle
        </button>
        <button class="test-button" onclick="testExternalLink()">
            Test External Link
        </button>
        
        <br>
        
        <button class="test-button" onclick="testScrollDepth(50)">
            Test 50% Scroll
        </button>
        <button class="test-button" onclick="testPerformanceEvent()">
            Test Performance Event
        </button>
        <button class="test-button" onclick="testCustomEvent()">
            Test Custom Event
        </button>
    </div>

    <div class="test-section">
        <h2>üì± Page Info</h2>
        <div id="page-info">Loading...</div>
    </div>

    <div class="test-section">
        <h2>üìù Event Log</h2>
        <button class="test-button" onclick="clearLog()">Clear Log</button>
        <div id="event-log" class="log-area">
            [Analytics Test Log]<br>
        </div>
    </div>

    <script>
        // Mock Umami object for testing
        window.umami = window.umami || {
            track: function(eventName, eventData) {
                logEvent('TRACKED', eventName, eventData);
                
                // Simulate actual analytics call
                console.log('üìä Analytics Event:', eventName, eventData);
                
                return Promise.resolve();
            }
        };

        // Logging function
        function logEvent(type, name, data) {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type}: ${name}`;
            const dataStr = data ? ` - ${JSON.stringify(data)}` : '';
            
            const logArea = document.getElementById('event-log');
            logArea.innerHTML += `${logEntry}${dataStr}<br>`;
            logArea.scrollTop = logArea.scrollHeight;
        }

        function clearLog() {
            document.getElementById('event-log').innerHTML = '[Analytics Test Log - Cleared]<br>';
        }

        // Test functions
        function testDownloadEvent(platform) {
            if (window.umami) {
                umami.track('download-click', { platform: platform });
            } else {
                logEvent('ERROR', 'download-click', { error: 'Umami not loaded' });
            }
        }

        function testNavigationEvent(section) {
            if (window.umami) {
                umami.track('navigation', { section: section });
            } else {
                logEvent('ERROR', 'navigation', { error: 'Umami not loaded' });
            }
        }

        function testThemeToggle() {
            const currentTheme = document.body.classList.contains('dark') ? 'dark' : 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            if (window.umami) {
                umami.track('theme-toggle', { from: currentTheme, to: newTheme });
            } else {
                logEvent('ERROR', 'theme-toggle', { error: 'Umami not loaded' });
            }
        }

        function testExternalLink() {
            if (window.umami) {
                umami.track('external-link', { destination: 'github.com' });
            } else {
                logEvent('ERROR', 'external-link', { error: 'Umami not loaded' });
            }
        }

        function testScrollDepth(percentage) {
            if (window.umami) {
                umami.track('scroll-depth', { percentage: percentage });
            } else {
                logEvent('ERROR', 'scroll-depth', { error: 'Umami not loaded' });
            }
        }

        function testPerformanceEvent() {
            if (window.umami) {
                umami.track('page-performance', { 
                    loadTime: 1200, 
                    category: 'good' 
                });
            } else {
                logEvent('ERROR', 'page-performance', { error: 'Umami not loaded' });
            }
        }

        function testCustomEvent() {
            if (window.umami) {
                umami.track('test-event', { 
                    source: 'analytics-test-page',
                    timestamp: Date.now() 
                });
            } else {
                logEvent('ERROR', 'test-event', { error: 'Umami not loaded' });
            }
        }

        // Status checks
        function checkAnalyticsStatus() {
            const statusEl = document.getElementById('analytics-status');
            const umamiEl = document.getElementById('umami-status');
            
            // Check if we're in production-like environment
            const isProduction = location.hostname !== 'localhost' && location.hostname !== '127.0.0.1';
            
            if (isProduction) {
                statusEl.className = 'status success';
                statusEl.textContent = '‚úÖ Production environment - Analytics should be active';
            } else {
                statusEl.className = 'status warning';
                statusEl.textContent = '‚ö†Ô∏è Development environment - Analytics may be disabled';
            }
            
            // Check Umami availability
            if (window.umami) {
                umamiEl.className = 'status success';
                umamiEl.textContent = '‚úÖ Umami object available (may be mock for testing)';
            } else {
                umamiEl.className = 'status error';
                umamiEl.textContent = '‚ùå Umami not loaded - Check configuration';
            }
        }

        // Page info
        function displayPageInfo() {
            const infoEl = document.getElementById('page-info');
            infoEl.innerHTML = `
                <strong>Current URL:</strong> ${window.location.href}<br>
                <strong>User Agent:</strong> ${navigator.userAgent}<br>
                <strong>Viewport:</strong> ${window.innerWidth}x${window.innerHeight}<br>
                <strong>Local Storage Available:</strong> ${typeof Storage !== 'undefined' ? 'Yes' : 'No'}<br>
                <strong>Do Not Track:</strong> ${navigator.doNotTrack || 'Not set'}<br>
                <strong>Language:</strong> ${navigator.language}<br>
                <strong>Referrer:</strong> ${document.referrer || 'Direct visit'}
            `;
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            checkAnalyticsStatus();
            displayPageInfo();
            logEvent('INIT', 'analytics-test-page', { url: window.location.href });
        });

        // Simulate real page events
        let scrollDepthReached = 0;
        window.addEventListener('scroll', () => {
            const scrollPercentage = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
            
            if (scrollPercentage > scrollDepthReached && [25, 50, 75, 100].includes(scrollPercentage)) {
                scrollDepthReached = scrollPercentage;
                logEvent('AUTO', 'scroll-depth', { percentage: scrollPercentage });
            }
        });

        // Performance tracking
        window.addEventListener('load', () => {
            if (performance.getEntriesByType) {
                const navigationEntry = performance.getEntriesByType('navigation')[0];
                if (navigationEntry) {
                    const loadTime = Math.round(navigationEntry.loadEventEnd - navigationEntry.navigationStart);
                    logEvent('AUTO', 'page-load', { loadTime: loadTime + 'ms' });
                }
            }
        });
    </script>

    <footer style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #e5e7eb; text-align: center; color: #6b7280;">
        <p>WHPH Analytics Testing | <a href="/" style="color: #f4d03e;">‚Üê Back to Landing Page</a></p>
        <p><small>This page simulates analytics events for testing purposes.</small></p>
    </footer>
</body>
</html>